<!-- HTML Template By: Emma Hobden -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Profile Page</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" media="screen">
</head>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', () => {
        let online_status = {{ status }};

        if (online_status == 1) {
            document.querySelector('#online_stat').innerHTML = "Online"
        } else {
            document.querySelector('#online_stat').innerHTML = "Offline"
        }
        document.querySelector('changeStatus').onclick = () => {
        }
    })
</script>


<body>

<div class="navbar">
    <a class="logo" a href="#">Home</a>
    <a href="{{ url_for('profile') }}">{{ username }}</a>
    <a href="#">Forums</a>
    <a href="{{ url_for('chat') }}">Chat</a>
    <a href="{{ url_for('all_users') }}">Users</a>
    <a href="{{ url_for('logout') }}"> Logout </a>
</div>

<div id="main-section">

    <!-- Left Column -->
    <div id="left_column">

        <div id="mUsername">{{ user_object.username }}</div>

        <img src="{{ url_for('uploaded_file', filename=user_object.user_photo) }}" height="200px" width="200px"
             class="profilePic"/>

        <br>

        <!-- Trigger/Open The Modal -->
        <button id="myBtn" class="myBtn uploadPhotoButton">Change</button>

        <hr>

        <div id="mFirstLast">{{ user_object.firstname }} {{ user_object.lastname }}</div>

        <div id="mRole">Role: {{ role_name }}</div>

        <div id="mEmail">Email: {{ user_object.email }}</div>

        <div id="mCredits">Credits: 0</div>

        <hr>


        <div id="userUploads">

            <h4 class="subHeading">Your Files </h4>

            <!-- Trigger/Open The Modal -->
            <button id="myBtn" class="myBtn uploadDocsButton" >Upload Documents</button>

            {% for file in user_files %}
                <a href="{{ url_for('download', dl_name=file.file_name) }}">
                    <h5>{{ file.file_name }} </h5>
                </a>
            {% endfor %}

        </div>


        <!-- UPLOAD NEW PROFILE PIC Modal -->
        <div id="myModal" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
                <span class="close">&times;</span>
                <h4>Upload A New Profile Photo</h4>
                <form method="post" enctype="multipart/form-data">
                    {{ image_form.hidden_tag() }}
                    {{ image_form.file(class_="chooseFile") }}<br>
                    {{ image_form.submit_button }}
                    {{ image_form.csrf_token }}
                </form>
            </div>

        </div>


        <!-- UPLOAD NEW DOCS Modal -->
        <div id="myModal2" class="modal">

            <!-- Modal content -->
            <div class="modal2-content">
                <span class="close">&times;</span>
                <h4>Upload A New File</h4>
                <form method="post" enctype="multipart/form-data">
                    {{ file_form.hidden_tag() }}
                    {{ file_form.file(class_="chooseFile") }}<br>
                    {{ file_form.submit_button }}
                    {{ file_form.csrf_token }}
                </form>
            </div>

        </div>


    </div><!-- End Left Column -->


    <!-- Right Column -->
    <div id="right_column">

        <h4><a href="{{ url_for('add_post') }}">Add New Post</a></h4>
        {% for post in blog_posts %}
            <a href="{{ url_for('post', post_id=post.id) }}">
                <h5>{{ post.type|upper }} : {{ post.title }} - {{ post.subtitle }}</h5>
                By {{ post.author }} on {{ post.date_posted.strftime('%B %d, %Y') }} </a>
        {% endfor %}

    </div><!-- End Right Column -->


</div>



{#<div id="userInfo_bg">#}
{#    <div id="userInfo">#}
{#        <h1>Hello {{ user_object.firstname }} {{ user_object.lastname }}</h1>#}
{##}
{#        <h2>Username: {{ user_object.username }}</h2>#}
{#        <h2>Email: {{ user_object.email }}</h2>#}
{##}
{#        <h3>Credits: 0</h3>#}
{#        <div id="online_stat"></div>#}
{#        <h3>Status: {{ status_string }}#}
{#            <button id="changeStatus">Button</button>#}
{#        </h3>#}
{##}
{##}
{#        <h3>Role: {{ role_name }}</h3>#}
{##}
{##}
{#        <h4>Upload A New File</h4>#}
{#        <form method="post" enctype="multipart/form-data">#}
{#            {{ file_form.hidden_tag() }}#}
{#            {{ file_form.file }}<br>#}
{#            {{ file_form.submit_button }}#}
{#            {{ file_form.csrf_token }}#}
{#        </form>#}
{##}
{#        <h4>Your Files </h4>#}
{#        {% for file in user_files %}#}
{#            <a href="{{ url_for('download', dl_name=file.file_name) }}">#}
{#                <h5>{{ file.file_name }} </h5></a>#}
{##}
{#        {% endfor %}#}
{##}
{#        <div id="profilePic">#}
{#            <img src="{{ url_for('uploaded_file', filename=user_object.user_photo) }}" height="200px" width="200px"/>#}
{#        </div>#}
{##}
{#            //<div id="profilePic"></div>#}
{#        <img src="../static/images/womanWorking.jpg" width="100px" height="100px"/>#}
{#        <img src="data:;base64,{{ image }}" width="400px" height="400px"/>#}
{#        <br>#}
{##}
{#        <h4>Upload A New Profile Photo</h4>#}
{#        <form method="post" enctype="multipart/form-data">#}
{#            {{ image_form.hidden_tag() }}#}
{#            {{ image_form.file }}<br>#}
{#            {{ image_form.submit_button }}#}
{#            {{ image_form.csrf_token }}#}
{#        </form>#}
{##}
{##}
{#        <h4><a href="{{ url_for('add_post') }}">Add New Post</a></h4>#}
{#        {% for post in blog_posts %}#}
{#            <a href="{{ url_for('post', post_id=post.id) }}">#}
{#                <h5>{{ post.type|upper }} : {{ post.title }} - {{ post.subtitle }}</h5>#}
{#                By {{ post.author }} on {{ post.date_posted.strftime('%B %d, %Y') }} </a>#}
{#        {% endfor %}#}
{##}
{#    </div>#}
{#</div>#}


<script>
    // Get the modal
    let modal = document.getElementsByClassName('modal');

    // Get the button that opens the modal
    let btn = document.getElementsByClassName("myBtn");

    // Get the <span> element that closes the modal
    let span = document.getElementsByClassName("close");

    // When the user clicks the button, open the modal
    btn[0].onclick = function () {
        modal[0].style.display = "block";
    }

    btn[1].onclick = function () {
        modal[1].style.display = "block";
    }
    // When the user clicks on <span> (x), close the modal
    span[0].onclick = function () {
        modal[0].style.display = "none";
    }

    span[1].onclick = function () {
        modal[1].style.display = "none";
    }
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>

</body>
</html>
